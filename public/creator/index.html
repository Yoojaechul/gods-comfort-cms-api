<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CMS Creator</title>
  <link rel="stylesheet" href="/creator/creator.css">
</head>
<body>
  <div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
      <h1 style="margin: 0;">🎨 CMS Creator Panel</h1>
      <button onclick="logout()" class="danger" style="width: auto; padding: 12px 24px;">🚪 로그아웃</button>
    </div>

    <!-- API Key 설정 -->
    <div class="section" id="apiKeySection" style="display: none;">
      <h2>API Key 설정 (레거시)</h2>
      <div class="api-key-input">
        <input type="password" id="apiKeyInput" placeholder="x-api-key 입력">
        <button onclick="saveApiKey()">저장</button>
      </div>
      <div id="apiKeyStatus"></div>
      <div id="userInfo" class="user-info" style="display: none;">
        <strong>사용자:</strong> <span id="userName"></span> | 
        <strong>사이트:</strong> <span id="userSite"></span>
      </div>
    </div>

    <!-- 영상 관리 -->
    <div class="section">
      <h2>영상 관리</h2>
      <div class="grid">
        <div class="form-group">
          <label>플랫폼</label>
          <select id="videoPlatform">
            <option value="youtube">YouTube</option>
            <option value="facebook">Facebook</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="form-group">
          <label>공개 설정</label>
          <select id="videoVisibility">
            <option value="public">Public</option>
            <option value="private">Private</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label id="sourceUrlLabel">소스 URL *</label>
        <input type="text" id="videoSourceUrl" placeholder="https://www.youtube.com/watch?v=...">
      </div>
      <div class="form-group">
        <label>제목 (옵션 - 자동 생성됨)</label>
        <input type="text" id="videoTitle" placeholder="제목을 입력하거나 비워두면 자동 생성됩니다">
      </div>
      <div class="form-group">
        <label>썸네일 URL (옵션 - 자동 생성됨)</label>
        <input type="text" id="videoThumbnail" placeholder="썸네일 URL을 입력하거나 비워두면 자동 생성됩니다">
      </div>
      <button onclick="createVideo()">영상 등록</button>
      <button onclick="loadVideos()" class="secondary">목록 새로고침</button>
      <table id="videosTable">
        <thead>
          <tr>
            <th>플랫폼</th>
            <th>제목</th>
            <th>썸네일</th>
            <th>공개</th>
            <th>생성일</th>
            <th>작업</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- 플랫폼 키 관리 -->
    <div class="section">
      <h2>플랫폼 키/토큰 관리</h2>
      <div class="grid">
        <div class="form-group">
          <label>플랫폼</label>
          <select id="keyProvider">
            <option value="youtube">YouTube</option>
            <option value="facebook">Facebook</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="form-group">
          <label>키 이름</label>
          <input type="text" id="keyName" placeholder="예: access_token, api_key">
        </div>
      </div>
      <div class="form-group">
        <label>키 값</label>
        <input type="password" id="keyValue" placeholder="플랫폼 키/토큰 입력">
      </div>
      <button onclick="saveProviderKey()">저장</button>
      <button onclick="loadProviderKeys()" class="secondary">목록 새로고침</button>
      <table id="keysTable">
        <thead>
          <tr>
            <th>플랫폼</th>
            <th>키 이름</th>
            <th>작업</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- 영상 수정 모달 -->
  <div id="editVideoModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">영상 수정</div>
      <div class="form-group">
        <label>제목</label>
        <input type="text" id="editTitle" placeholder="제목">
      </div>
      <div class="form-group">
        <label>썸네일 URL</label>
        <input type="text" id="editThumbnail" placeholder="썸네일 URL (선택사항)">
      </div>
      <div class="form-group">
        <label>공개 설정</label>
        <select id="editVisibility">
          <option value="public">Public</option>
          <option value="private">Private</option>
        </select>
      </div>
      <button onclick="saveVideoEdit()">저장</button>
      <button onclick="closeEditModal()" class="secondary">취소</button>
    </div>
  </div>

  <script src="/creator/creator.js"></script>
</body>
</html>

