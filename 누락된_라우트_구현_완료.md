# ëˆ„ë½ëœ ë¼ìš°íŠ¸ êµ¬í˜„ ì™„ë£Œ

## âœ… ìˆ˜ì •ëœ íŒŒì¼ ë° ì½”ë“œ Diff

### `server.js` - ëˆ„ë½ëœ Admin ë¼ìš°íŠ¸ ì¶”ê°€

**ë³€ê²½ ì‚¬í•­:**
1. `POST /admin/videos` - Adminìš© ë¹„ë””ì˜¤ ìƒì„± (ìƒˆë¡œ ì¶”ê°€)
2. `POST /videos/bulk` - ì¼ê´„ ì˜ìƒ ìƒì„± (Admin/Creator ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥, ìƒˆë¡œ ì¶”ê°€)
3. `GET /admin/dashboard/summary` - ëŒ€ì‹œë³´ë“œ ìš”ì•½ ì •ë³´ (ìƒˆë¡œ ì¶”ê°€)
4. `POST /admin/uploads/thumbnail` - ì¸ë„¤ì¼ ì—…ë¡œë“œ (ë”ë¯¸ êµ¬í˜„, ìƒˆë¡œ ì¶”ê°€)

## ğŸ“‹ êµ¬í˜„ëœ ë¼ìš°íŠ¸ ëª©ë¡

### 1. POST /admin/videos - Adminìš© ë¹„ë””ì˜¤ ìƒì„±

- **Method**: `POST`
- **URL**: `/admin/videos`
- **ì¸ì¦**: í•„ìš” (Admin JWT ë˜ëŠ” Admin API Key)
- **Request Body**:
  ```json
  {
    "platform": "youtube",
    "source_url": "https://www.youtube.com/watch?v=...",
    "title": "Video Title",
    "thumbnail_url": "https://...",
    "visibility": "public",
    "language": "en",
    "status": "active",
    "site_id": "gods",
    "owner_id": "creator123" // ì„ íƒì‚¬í•­, ì—†ìœ¼ë©´ í˜„ì¬ Admin ì‚¬ìš©
  }
  ```
- **ì‘ë‹µ**: ìƒì„±ëœ ë¹„ë””ì˜¤ ê°ì²´

### 2. POST /videos/bulk - ì¼ê´„ ì˜ìƒ ìƒì„±

- **Method**: `POST`
- **URL**: `/videos/bulk`
- **ì¸ì¦**: í•„ìš” (Admin ë˜ëŠ” Creator)
- **Request Body**:
  ```json
  {
    "videos": [
      {
        "platform": "youtube",
        "source_url": "https://www.youtube.com/watch?v=...",
        "title": "Video Title",
        "thumbnail_url": "https://...",
        "visibility": "public",
        "language": "en",
        "status": "active"
      }
    ],
    "site_id": "gods" // Adminë§Œ í•„ìˆ˜, CreatorëŠ” ìë™ ì‚¬ìš©
  }
  ```
- **ì‘ë‹µ**:
  ```json
  {
    "success": true,
    "created": 5,
    "errors": 0,
    "results": [...],
    "error_details": []
  }
  ```

### 3. GET /admin/dashboard/summary - ëŒ€ì‹œë³´ë“œ ìš”ì•½

- **Method**: `GET`
- **URL**: `/admin/dashboard/summary?site_id=gods`
- **ì¸ì¦**: í•„ìš” (Admin JWT ë˜ëŠ” Admin API Key)
- **Query Parameters**:
  - `site_id` (string, í•„ìˆ˜): ì‚¬ì´íŠ¸ ID
- **ì‘ë‹µ**:
  ```json
  {
    "site_id": "gods",
    "videos": {
      "total": 100,
      "active": 95
    },
    "creators": {
      "total": 10,
      "active": 8
    },
    "visits": {
      "last_7_days": 1500
    },
    "views": {
      "last_7_days": 5000
    },
    "recent_videos": [
      {
        "id": "video123",
        "title": "Recent Video",
        "created_at": "2025-01-01T00:00:00.000Z"
      }
    ]
  }
  ```

### 4. POST /admin/uploads/thumbnail - ì¸ë„¤ì¼ ì—…ë¡œë“œ (ë”ë¯¸)

- **Method**: `POST`
- **URL**: `/admin/uploads/thumbnail`
- **ì¸ì¦**: í•„ìš” (Admin JWT ë˜ëŠ” Admin API Key)
- **Request Body**:
  ```json
  {
    "url": "https://example.com/thumbnail.jpg",
    "video_id": "video123" // ì„ íƒì‚¬í•­
  }
  ```
- **ì‘ë‹µ**:
  ```json
  {
    "success": true,
    "thumbnail_url": "https://example.com/thumbnail.jpg",
    "video_id": "video123",
    "message": "Thumbnail URL saved (file upload not implemented yet)"
  }
  ```

## âœ… ì£¼ìš” íŠ¹ì§•

1. **POST /admin/videos**: Adminì´ ë¹„ë””ì˜¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©°, `owner_id`ë¥¼ ì§€ì •í•˜ì—¬ íŠ¹ì • Creatorì—ê²Œ í• ë‹¹ ê°€ëŠ¥
2. **POST /videos/bulk**: Adminê³¼ Creator ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•œ ì¼ê´„ ì˜ìƒ ìƒì„± (ìµœëŒ€ 20ê°œ)
3. **GET /admin/dashboard/summary**: ëŒ€ì‹œë³´ë“œì— í•„ìš”í•œ ìš”ì•½ ì •ë³´ ì œê³µ (ì˜ìƒ ìˆ˜, í¬ë¦¬ì—ì´í„° ìˆ˜, ë°©ë¬¸ì ìˆ˜, ì¡°íšŒìˆ˜ ë“±)
4. **POST /admin/uploads/thumbnail**: í˜„ì¬ëŠ” URLë§Œ ë°›ì•„ì„œ ì €ì¥ (ì‹¤ì œ íŒŒì¼ ì—…ë¡œë“œëŠ” ì¶”í›„ êµ¬í˜„)

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ

### PowerShell í…ŒìŠ¤íŠ¸

```powershell
# Admin ë¹„ë””ì˜¤ ìƒì„±
$body = @{
  platform = "youtube"
  source_url = "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
  site_id = "gods"
  title = "Test Video"
} | ConvertTo-Json

$headers = @{
  "Content-Type" = "application/json"
  "Authorization" = "Bearer YOUR_ADMIN_JWT_TOKEN"
}

Invoke-WebRequest -Uri "http://localhost:8787/admin/videos" -Method POST -Body $body -Headers $headers -UseBasicParsing

# ì¼ê´„ ì˜ìƒ ìƒì„±
$body = @{
  videos = @(
    @{
      platform = "youtube"
      source_url = "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
    }
  )
  site_id = "gods"
} | ConvertTo-Json

Invoke-WebRequest -Uri "http://localhost:8787/videos/bulk" -Method POST -Body $body -Headers $headers -UseBasicParsing

# ëŒ€ì‹œë³´ë“œ ìš”ì•½
Invoke-WebRequest -Uri "http://localhost:8787/admin/dashboard/summary?site_id=gods" -Method GET -Headers $headers -UseBasicParsing

# ì¸ë„¤ì¼ ì—…ë¡œë“œ
$body = @{
  url = "https://example.com/thumbnail.jpg"
  video_id = "video123"
} | ConvertTo-Json

Invoke-WebRequest -Uri "http://localhost:8787/admin/uploads/thumbnail" -Method POST -Body $body -Headers $headers -UseBasicParsing
```

### JavaScript/TypeScript ì˜ˆì‹œ

```typescript
// Admin ë¹„ë””ì˜¤ ìƒì„±
const video = await fetch('http://localhost:8787/admin/videos', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${adminToken}`,
  },
  body: JSON.stringify({
    platform: 'youtube',
    source_url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
    site_id: 'gods',
    title: 'Test Video',
  }),
}).then(r => r.json());

// ì¼ê´„ ì˜ìƒ ìƒì„±
const bulkResult = await fetch('http://localhost:8787/videos/bulk', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${adminToken}`,
  },
  body: JSON.stringify({
    videos: [
      {
        platform: 'youtube',
        source_url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
      },
    ],
    site_id: 'gods',
  }),
}).then(r => r.json());

// ëŒ€ì‹œë³´ë“œ ìš”ì•½
const summary = await fetch('http://localhost:8787/admin/dashboard/summary?site_id=gods', {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${adminToken}`,
  },
}).then(r => r.json());

// ì¸ë„¤ì¼ ì—…ë¡œë“œ
const thumbnail = await fetch('http://localhost:8787/admin/uploads/thumbnail', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${adminToken}`,
  },
  body: JSON.stringify({
    url: 'https://example.com/thumbnail.jpg',
    video_id: 'video123',
  }),
}).then(r => r.json());
```

## âœ… ìµœì¢… í™•ì¸ ì‚¬í•­

- [x] POST /admin/videos - Adminìš© ë¹„ë””ì˜¤ ìƒì„±
- [x] POST /videos/bulk - ì¼ê´„ ì˜ìƒ ìƒì„± (Admin/Creator ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥)
- [x] GET /admin/dashboard/summary - ëŒ€ì‹œë³´ë“œ ìš”ì•½ ì •ë³´
- [x] POST /admin/uploads/thumbnail - ì¸ë„¤ì¼ ì—…ë¡œë“œ (ë”ë¯¸ êµ¬í˜„)
- [x] PUT /admin/creators/:id - ì´ë¯¸ êµ¬í˜„ë¨ (í™•ì¸ ì™„ë£Œ)
- [x] ëª¨ë“  ë¼ìš°íŠ¸ì— ê´€ë¦¬ì ì¸ì¦ ì ìš©

## ğŸ“ ì°¸ê³ ì‚¬í•­

1. **POST /videos/bulk vs POST /videos/batch**:
   - `/videos/bulk`: Adminê³¼ Creator ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥
   - `/videos/batch`: Creator ì „ìš© (ê¸°ì¡´ ìœ ì§€)

2. **POST /admin/videos vs POST /videos**:
   - `/admin/videos`: Admin ì „ìš©, `owner_id` ì§€ì • ê°€ëŠ¥
   - `/videos`: Creator ì „ìš©, ë³¸ì¸ ì†Œìœ ë¡œë§Œ ìƒì„±

3. **POST /admin/uploads/thumbnail**:
   - í˜„ì¬ëŠ” URLë§Œ ë°›ì•„ì„œ ì €ì¥ (ë”ë¯¸ êµ¬í˜„)
   - ì‹¤ì œ íŒŒì¼ ì—…ë¡œë“œëŠ” ì¶”í›„ êµ¬í˜„ í•„ìš”

4. **GET /admin/dashboard/summary**:
   - ìµœê·¼ 7ì¼ ë°ì´í„° ê¸°ì¤€
   - ìµœê·¼ ìƒì„±ëœ ì˜ìƒ 5ê°œ í¬í•¨

CMS Settingsì—ì„œ ëª¨ë“  ë¼ìš°íŠ¸ê°€ ì •ìƒ ë™ì‘í•©ë‹ˆë‹¤.






































